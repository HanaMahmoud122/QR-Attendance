<!DOCTYPE html>
<html>
<head>
<title>QR Attendance</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<style>
  body { font-family: Arial; text-align: center; margin-top: 40px; }
  #qr { margin: auto; width: 200px; height: 200px; }
</style>
</head>
<body>

<h2>Attendance QR</h2>
<div id="qr"></div>
<p id="code" style="font-size:22px; margin-top:20px;"></p>

<script>

let firstCode = null;

// رابط الفورم
const formLink = "https://docs.google.com/forms/d/e/1FAIpQLSeSBl8tONDbIeO_kmYMtETqf9jPB1nMi-6mgl6CHtEx80sjXg/viewform";

// كود فاضي للعرض فقط
function randomDisplayCode() {
    return Math.floor(100000 + Math.random() * 900000).toString();
}

function generate() {

    if (!firstCode) {
        // أول كود فعلي للتسجيل
        firstCode = randomDisplayCode();

        const link = formLink + "?usp=pp_url&entry.0=" + firstCode;

        document.getElementById("qr").innerHTML = "";
        new QRCode(document.getElementById("qr"), {
            text: link,
            width: 200,
            height: 200
        });

        document.getElementById("code").textContent = "Code: " + firstCode;

        return;
    }

    // باقي الأكواد للعرض فقط
    const fake = randomDisplayCode();

    document.getElementById("qr").innerHTML = "";
    new QRCode(document.getElementById("qr"), {
        text: fake,
        width: 200,
        height: 200
    });

    document.getElementById("code").textContent = "Code: " + fake;
}

generate();
setInterval(generate, 3000);

</script>

</body>
</html>
