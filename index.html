<!DOCTYPE html>
<html>
<head>
<title>Dynamic QR Attendance</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<style>
  body { font-family: Arial; text-align: center; margin-top: 40px; }
  #qr { margin: auto; width: 200px; height: 200px; }
</style>
</head>
<body>

<h2>Attendance QR</h2>
<div id="qr"></div>
<p id="code" style="font-size:22px; margin-top:20px;"></p>

<script>
// أول كود يتحفظ ويستخدم للتسجيل
let firstCode = null;

// رابط الفورم العادي (اكتب رابط الفورم هنا)
const formLink = "https://docs.google.com/forms/d/e/1FAIpQLSeSBl8tONDbIeO_kmYMtETqf9jPB1nMi-6mgl6CHtEx80sjXg/viewform";

function generate() {
    // كود عشوائي جديد للعرض على الشاشة
    const current = Math.floor(100000 + Math.random() * 900000).toString();

    // حفظ أول كود فقط
    if (!firstCode) {
        firstCode = current;
    }

    document.getElementById("code").textContent = "Code: " + current;

    // كل QR بعد كده يفتح الفورم بنفس أول كود
    const link = formLink + "?usp=pp_url&entry.0=" + firstCode; // entry.0 مجرد حقل افتراضي

    document.getElementById("qr").innerHTML = "";
    new QRCode(document.getElementById("qr"), {
        text: link,
        width: 200,
        height: 200
    });
}

// بدء التوليد
generate();
setInterval(generate, 3000);
</script>

</body>
</html>
